<!doctype html>
<html>
  <head>
    <link href="components/bootstrap/docs/assets/css/bootstrap.css" rel="stylesheet">
    <link href="compiled_css/main.css" rel="stylesheet">
  </head>
  <body>
    <!-- CHROME EXTENSION POPUP -->
    <script type="text/x-handlebars" data-template-name="application">
      <nav id="main-navigation">
        <ul class="nav nav-pills">
          <li>{{#linkTo timer}}Timer{{/linkTo}}</li>
          <li>{{#linkTo tasks}}Tasks{{/linkTo}}</li>
          <li>{{#linkTo today}}Today{{/linkTo}}</li>
        </ul>
        <hr>
      </nav>
      <div>
        {{outlet}}
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="tasks">
      {{input type=text value=newTaskTitle placeholder="Add new task"}}
      <button {{action addTask}} class="btn">Add</button>

      <ul class="task-list">
        {{#each task in controller.openTasks itemController="task"}}
          <li {{bindAttr class="isEditing:editing"}}>
            {{#if task.isEditing}}
              {{view App.EditTaskView taskBinding=task}}
            {{else}}
              {{input type=checkbox checked=task.isCompleted}}
              {{#linkTo task task}}{{task.title}}{{/linkTo}}
              <button class="btn btn-small edit-btn" {{action editTask task}}>Edit</button>
            {{/if}}
          </li>
        {{/each}}
      </ul>

      <h5>
        Completed tasks
        <small>(<a {{action archiveTasks}} href="#">archive all completed</a>)</small>
      </h5>

      <ul class="completed-task-list">
        {{#each task in completedTasks itemController="task"}}
          <li class="completed">
            {{input type=checkbox checked=task.isCompleted}}
            {{task.title}}
          </li>
        {{/each}}
      </ul>
    </script>

    <script type="text/x-handlebars" data-template-name="today">
      <p>This is the list of the activities started today.</p>
      <table class="table">
        <tr>
          <th>Started</th>
          <th>Finished</th>
          <th>Task</th>
          <th>Elapsed</th>
        </tr>
      {{#each completedLogs}}
        <tr>
          <td>{{time startedAt}}</td>
          <td>{{time finishedAt}}</td>
          <td>{{task.title}}</td>
          <td>{{duration elapsedSeconds}}</td>
        </tr>
      {{/each}}
      </table>
    </script>

    <script type="text/x-handlebars" data-template-name="task">
      <h4>{{title}} <small>({{id}})</small></h4>

      <table class="table">
        <tr>
          <th>Started</th>
          <th>Finished</th>
          <th>Elapsed</th>
        </tr>
      {{#each logs}}
        <tr>
          <td>{{time startedAt}}</td>
          <td>{{time finishedAt}}</td>
          <td>{{duration elapsedSeconds}}</td>
        </tr>
      {{/each}}
      </table>
    </script>

    <script type="text/x-handlebars" data-template-name="timer">
      {{#if isRunning}}
        <h2>{{log.task.title}} Running...</h2>
        <label>Elapsed seconds: {{elapsedSeconds}}</label>
        <button class="btn" {{action stop}}>Stop</button>
        <button class="btn" {{action stop}}>Stop and close task</button>
      {{else}}
        <p>Select the task you start working on</p>
        {{view App.TimerSelect contentBinding=openTasks
            selectionBinding=selectedTask
            optionValuePath=content.id
            optionLabelPath=content.title
            prompt="-- Please select a task --"
            class="input-block-level"}}
      {{/if}}
    </script>

    <script src="components/jquery/jquery.js"></script>
    <script src="components/handlebars/handlebars.js"></script>
    <script src="components/ember/ember.js"></script>
    <script src="components/ember-data/index.js"></script>
    <script src="components/ember-localstorage/localstorage_adapter.js"></script>
    <script src="components/moment.js/moment.js"></script>
    <!-- build:js scripts/popup.js -->
    <script src="compiled_js/popup.js"></script>
    <!-- endbuild -->
  </body>
</html>
